<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêang Offline - Notes App</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f7f9fc;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
        }
        .container {
            max-width: 600px;
            padding: 2rem;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #4a90e2;
            margin-bottom: 1rem;
        }
        p {
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        .icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        .btn {
            display: inline-block;
            background-color: #4a90e2;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #3a7bc8;
        }
        .notes-container {
            margin-top: 2rem;
            text-align: left;
            width: 100%;
        }
        .note-card {
            background-color: #fff9c4;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .note-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .note-content {
            color: #555;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="icon">üìù</div>
        <h1>B·∫°n ƒëang ·ªü ch·∫ø ƒë·ªô ngo·∫°i tuy·∫øn</h1>
        <p>ƒê·ª´ng lo l·∫Øng! B·∫°n v·∫´n c√≥ th·ªÉ xem c√°c ghi ch√∫ ƒë√£ ƒë∆∞·ª£c l∆∞u tr∆∞·ªõc ƒë√≥. Khi k·∫øt n·ªëi internet ƒë∆∞·ª£c kh√¥i ph·ª•c, ·ª©ng d·ª•ng s·∫Ω t·ª± ƒë·ªông ƒë·ªìng b·ªô h√≥a d·ªØ li·ªáu.</p>
        
        <a href="/" class="btn try-again">Th·ª≠ l·∫°i</a>
        
        <div class="notes-container" id="offline-notes">
            <!-- C√°c ghi ch√∫ s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y b·∫±ng JavaScript -->
            <p id="no-notes" style="text-align: center; display: none;">Kh√¥ng c√≥ ghi ch√∫ n√†o ƒë∆∞·ª£c l∆∞u trong b·ªô nh·ªõ c·ª•c b·ªô.</p>
        </div>
    </div>

    <script>
        // Khi trang t·∫£i xong, hi·ªÉn th·ªã c√°c ghi ch√∫ ƒë√£ ƒë∆∞·ª£c l∆∞u trong IndexedDB
        document.addEventListener('DOMContentLoaded', () => {
            const notesContainer = document.getElementById('offline-notes');
            const noNotesMessage = document.getElementById('no-notes');
            
            // Ki·ªÉm tra h·ªó tr·ª£ IndexedDB
            if (!window.indexedDB) {
                notesContainer.innerHTML = '<p>Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ l∆∞u tr·ªØ offline.</p>';
                return;
            }
            
            // M·ªü k·∫øt n·ªëi ƒë·∫øn IndexedDB
            const request = indexedDB.open('notes-offline-db', 1);
            
            request.onerror = (event) => {
                console.error('L·ªói khi m·ªü IndexedDB', event);
                notesContainer.innerHTML = '<p>Kh√¥ng th·ªÉ truy c·∫≠p d·ªØ li·ªáu offline.</p>';
            };
            
            request.onsuccess = (event) => {
                const db = event.target.result;
                const transaction = db.transaction(['notes'], 'readonly');
                const objectStore = transaction.objectStore('notes');
                const notes = [];
                
                objectStore.openCursor().onsuccess = (event) => {
                    const cursor = event.target.result;
                    
                    if (cursor) {
                        notes.push(cursor.value);
                        cursor.continue();
                    } else {
                        // Hi·ªÉn th·ªã c√°c ghi ch√∫
                        if (notes.length > 0) {
                            notes.forEach(note => {
                                const noteCard = document.createElement('div');
                                noteCard.className = 'note-card';
                                noteCard.style.backgroundColor = note.color || '#fff9c4';
                                
                                const title = document.createElement('div');
                                title.className = 'note-title';
                                title.textContent = note.title;
                                
                                const content = document.createElement('div');
                                content.className = 'note-content';
                                // Gi·ªõi h·∫°n n·ªôi dung hi·ªÉn th·ªã ƒë·ªÉ tr√°nh qu√° d√†i
                                content.textContent = note.content.length > 150 ? 
                                    note.content.substring(0, 150) + '...' : 
                                    note.content;
                                
                                noteCard.appendChild(title);
                                noteCard.appendChild(content);
                                notesContainer.appendChild(noteCard);
                            });
                        } else {
                            noNotesMessage.style.display = 'block';
                        }
                    }
                };
            };
            
            // Button th·ª≠ l·∫°i
            document.querySelector('.try-again').addEventListener('click', (e) => {
                e.preventDefault();
                window.location.reload();
            });
        });
    </script>
</body>
</html> 